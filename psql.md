Задача 1
Используя Docker, поднимите инстанс PostgreSQL (версию 13). Данные БД сохраните в volume.

Подключитесь к БД PostgreSQL, используя psql.

Воспользуйтесь командой \? для вывода подсказки по имеющимся в psql управляющим командам.

Найдите и приведите управляющие команды для:

вывода списка БД,
подключения к БД,
вывода списка таблиц,
вывода описания содержимого таблиц,
выхода из psql.

Решение:


<img width="802" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/fb6b91fd-8241-45e3-ae0d-dfdc0fe01427">

Задача 2
Используя psql, создайте БД test_database.

Изучите бэкап БД.

Восстановите бэкап БД в test_database.

Перейдите в управляющую консоль psql внутри контейнера.

Подключитесь к восстановленной БД и проведите операцию ANALYZE для сбора статистики по таблице.

Используя таблицу pg_stats, найдите столбец таблицы orders с наибольшим средним значением размера элементов в байтах.

Приведите в ответе команду, которую вы использовали для вычисления, и полученный результат.


Решение:

<img width="343" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/833119c6-a8f5-42df-9c1c-f36460f655af">


Задача 3
Архитектор и администратор БД выяснили, что ваша таблица orders разрослась до невиданных размеров и поиск по ней занимает долгое время. Вам как успешному выпускнику курсов DevOps в Нетологии предложили провести разбиение таблицы на 2: шардировать на orders_1 - price>499 и orders_2 - price<=499.

Предложите SQL-транзакцию для проведения этой операции.

Можно ли было изначально исключить ручное разбиение при проектировании таблицы orders?

Решение:


<img width="347" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/ab75da49-7318-4a4f-ace9-12c11ef200a0">


Задача 4
Используя утилиту pg_dump, создайте бекап БД test_database.

Как бы вы доработали бэкап-файл, чтобы добавить уникальность значения столбца title для таблиц test_database?

Решение:


<img width="734" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/c382df2c-14ce-4eb3-beb1-305f010a2817">

Отвечая на вопрос, Как бы вы доработали бэкап-файл, чтобы добавить уникальность значения столбца title для таблиц test_database?

Добавил фрагмент для уникальности. 
Например:
ALTER TABLE "public"."orders" ADD CONSTRAINT "orders_title_unique" UNIQUE ("title");



