Задача 1
Используя Docker, поднимите инстанс PostgreSQL (версию 12) c 2 volume, в который будут складываться данные БД и бэкапы.

Приведите получившуюся команду или docker-compose-манифест.

Решение:

<img width="725" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/373df6f8-87b9-48e5-ab2f-f98c1129068b">


Задача 2
В БД из задачи 1:

создайте пользователя test-admin-user и БД test_db;
в БД test_db создайте таблицу orders и clients (спeцификация таблиц ниже);
предоставьте привилегии на все операции пользователю test-admin-user на таблицы БД test_db;
создайте пользователя test-simple-user;
предоставьте пользователю test-simple-user права на SELECT/INSERT/UPDATE/DELETE этих таблиц БД test_db.
Таблица orders:

id (serial primary key);
наименование (string);
цена (integer).
Таблица clients:

id (serial primary key);
фамилия (string);
страна проживания (string, index);
заказ (foreign key orders).
Приведите:

итоговый список БД после выполнения пунктов выше;
описание таблиц (describe);
SQL-запрос для выдачи списка пользователей с правами над таблицами test_db;
список пользователей с правами над таблицами test_db.

Решение:

<img width="286" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/5fee12e5-12c7-4edf-a7ff-cabf2f92d36c">

<img width="506" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/7691c146-4ec6-4128-a4b7-bb22449ab69e">

<img width="362" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/97838e51-5881-430c-8348-6299daf0dfce">

Задача 3
Используя SQL-синтаксис, наполните таблицы следующими тестовыми данными:

Таблица orders

Наименование	цена
Шоколад	10
Принтер	3000
Книга	500
Монитор	7000
Гитара	4000
Таблица clients

ФИО	Страна проживания
Иванов Иван Иванович	USA
Петров Петр Петрович	Canada
Иоганн Себастьян Бах	Japan
Ронни Джеймс Дио	Russia
Ritchie Blackmore	Russia
Используя SQL-синтаксис:

вычислите количество записей для каждой таблицы.
Приведите в ответе:

- запросы,
- результаты их выполнения.

Решение:

<img width="328" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/e56898bc-64f0-401b-9ee9-763254a345e3">

<img width="380" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/19ebd6b5-acb4-46c7-b4c9-1f1baeb53253">


Задача 4
Часть пользователей из таблицы clients решили оформить заказы из таблицы orders.

Используя foreign keys, свяжите записи из таблиц, согласно таблице:

ФИО	Заказ
Иванов Иван Иванович	Книга
Петров Петр Петрович	Монитор
Иоганн Себастьян Бах	Гитара
Приведите SQL-запросы для выполнения этих операций.

Приведите SQL-запрос для выдачи всех пользователей, которые совершили заказ, а также вывод этого запроса.

Подсказка: используйте директиву UPDATE.

Решение:

<img width="380" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/c5eee4f3-98e2-4b7e-8b89-b09501b84532">


Задача 5
Получите полную информацию по выполнению запроса выдачи всех пользователей из задачи 4 (используя директиву EXPLAIN).

Приведите получившийся результат и объясните, что значат полученные значения.

Решение

<img width="392" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/758c28cd-d1cb-413a-b2bd-8de131f842ac">


Результат команды EXPLAIN предоставляет информацию о том, как база данных выполняет запрос. В данном случае:

"Seq Scan on clients" указывает на то, что используется последовательное сканирование всей таблицы "clients". Это означает, что база данных просто проходит по всем записям по порядку.
"cost=0.00..10.70" представляет собой оценку стоимости выполнения операции. В данном контексте, чем меньше, тем лучше. Однако, стоимость 10.70 не является критичной для небольших таблиц.
"rows=70" указывает на то, что запрос вернет примерно 70 строк.
"width=1036" представляет собой оценку ширины строки в байтах.
В общем, запрос использует простой метод - последовательное сканирование, что может быть неоптимальным для больших таблиц. 
В реальном продакшн-окружении рекомендуется использовать индексы и другие оптимизации для повышения производительности запросов.

Задача 6
Создайте бэкап БД test_db и поместите его в volume, предназначенный для бэкапов (см. задачу 1).

Остановите контейнер с PostgreSQL, но не удаляйте volumes.

Поднимите новый пустой контейнер с PostgreSQL.

Восстановите БД test_db в новом контейнере.

Приведите список операций, который вы применяли для бэкапа данных и восстановления.


Решение:

<img width="866" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/79dbfdd7-5fe6-471b-abe3-f4e92e8e045e">
<img width="401" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/3ad863e6-48ef-47f5-8844-06cc327b4bfa">
<img width="490" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/5df2cce8-e975-45ea-8997-9d4abe016dbf">


Новый контейнер с бекапом
<img width="764" alt="image" src="https://github.com/Franky12111990/sdb-homeworks/assets/121640886/2b0312a6-c4c5-4c4c-a7ec-5456f178971b">








